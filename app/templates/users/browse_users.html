{% extends 'base.html' %}
{% load static %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'nav.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'users/styles.css' %}"/>
    <body>


    <h3 class="title">Search by Username</h3>
    <div class="input-group">
        <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />

    </div>

    <table class="table mx-5">
        <tbody>
            {% for profile in users %}
            <tr>
                <th scope="row">
                    <a href="{% url 'user_profile' profile.user.id %}"
                        class="text-decoration-none text-dark">
                    {{ profile }}
                </th>
    
                <td>{{ profile.user.first_name }} {{ profile.user.last_name }}</td>
                <td> Upcoming: {{ profile.upcomingEvent|default:'None' }}</td>
                <td>Past Events: {{ profile.pastEvent|default:'None' }}</td>
                <td>{{ profile.bio }}</td>
                <td class="float-right">
                    {% if profile in friends %}
                    <form method="POST" 
                            action="{% url 'remove' profile.user.id %}">
                        {% csrf_token %}
                        <button type="submit"
                                class="btn btn-danger rounded-0 py-1 px-2 my-3">
                            Remove
                        </button>
                    </form>
                    {% else %}
                        <form method="POST" 
                                action="{% url 'add' profile.user.id %}">
                            {% csrf_token %}
                            <button type="submit" 
                                    class="btn btn-danger rounded-0 py-1 px-2 my-3">
                                Add
                            </button>
                        </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>

    </table>

    </body>
{% endblock %}

